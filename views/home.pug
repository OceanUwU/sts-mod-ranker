doctype html
html
    head
        meta(charset="utf-8")
        meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet")
        link(href="/index.css" rel="stylesheet")
        title StS Mod Ranker
    body.bg-dark.text-light
        if req.user
            p.w-100.text-end.p-2#login
                | Logged in as 
                img.rounded-circle(src=`https://cdn.discordapp.com/avatars/${req.user.id}/${req.user.avatar}?size=24`)
                b= req.user.username
                a.btn.btn-secondary.btn-sm.ms-2(href="/logout") Logout
                br
                | Your votes are anonymous.
            .d-flex.flex-column.vw-100.vh-100.d-none.justify-content-center.align-items-center#vote
                h3.mb-5 Which character do you prefer?
                .w-100.d-flex.justify-content-evenly.align-items-center.mb-3r#options.mb-2: for i in [0, null, 1]
                    if i !== null
                        .d-flex.flex-column.align-items-cente
                            button.btn.btn-primary.btn-lg.mb-3(onclick=`vote(${i})`) #[img.rounded]#[br]#[span]
                            button.btn.btn-secondary.btn-sm(onclick=`blacklist(${i})`) Never played
                    else
                        h5 or
                button.btn.btn-secondary.btn-sm.mb-2(onclick="blacklist(2)") Never played either
                button.btn.btn-secondary.btn-sm.mb-3(onclick="reroll()") Reroll
                hr.w-100
                span Your votes: #[b#me ?]
                span Total votes: #[b#total ?]
                span People currently voting: #[b#voters ?]
                        
            .d-flex.vw-100.vh-100.justify-content-center.align-items-center#load: .spinner-border(role="status"): span.visually-hidden Loading...
            .d-flex.vw-100.vh-100.justify-content-center.align-items-center.d-none#finish.text-center: h4 There are no more items to vote on. #[br] Thanks for voting!

            script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js")
            script(src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js")
            script(src="/index.js")
        else
            .vh-100.d-flex.flex-column.justify-content-center.align-items-center.text-center: .w-75
                p [intro sentence]
                h3 #[a(href="/login") Login with Discord] to vote on characters
                p Provided by #[img(src="https://slay.ocean.lol/icon.png" style="width:2rem")] #[b Slaytabase]
            script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js")